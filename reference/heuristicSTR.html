<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Automatic STR decomposition with heuristic search of the parameters — heuristicSTR • stR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Sans-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Automatic STR decomposition with heuristic search of the parameters — heuristicSTR"><meta name="description" content="Automatically selects parameters (lambda coefficients) for an STR decomposition of time series data.
Heuristic approach can give a better estimate compare to a standard optmisaton methods used in STR.
If a parallel backend is registered for use before STR call,
heuristicSTR will use it for n-fold cross validation computations."><meta property="og:description" content="Automatically selects parameters (lambda coefficients) for an STR decomposition of time series data.
Heuristic approach can give a better estimate compare to a standard optmisaton methods used in STR.
If a parallel backend is registered for use before STR call,
heuristicSTR will use it for n-fold cross validation computations."><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hack-font@3/build/web/hack-subset.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">stR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/stRvignette.html">Package stR</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/robjhyndman/stR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Automatic STR decomposition with heuristic search of the parameters</h1>
      <small class="dont-index">Source: <a href="https://github.com/robjhyndman/stR/blob/master/R/heuristicSTR.R" class="external-link"><code>R/heuristicSTR.R</code></a></small>
      <div class="d-none name"><code>heuristicSTR.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Automatically selects parameters (lambda coefficients) for an STR decomposition of time series data.
Heuristic approach can give a better estimate compare to a standard optmisaton methods used in <code><a href="STR.html">STR</a></code>.</p>
<p>If a parallel backend is registered for use before <code>STR</code> call,
<code>heuristicSTR</code> will use it for n-fold cross validation computations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">heuristicSTR</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">predictors</span>,</span>
<span>  confidence <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lambdas <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pattern <span class="op">=</span> <span class="fu">extractPattern</span><span class="op">(</span><span class="va">predictors</span><span class="op">)</span>,</span>
<span>  nFold <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  reltol <span class="op">=</span> <span class="fl">0.005</span>,</span>
<span>  gapCV <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  solver <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Matrix"</span>, <span class="st">"cholesky"</span><span class="op">)</span>,</span>
<span>  trace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ratioGap <span class="op">=</span> <span class="fl">1e+12</span>,</span>
<span>  relCV <span class="op">=</span> <span class="fl">0.01</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Time series or a vector of length <em><strong>L</strong></em>.</p></dd>


<dt id="arg-predictors">predictors<a class="anchor" aria-label="anchor" href="#arg-predictors"></a></dt>
<dd><p>List of predictors.<br>
According to the paradigm of this implementation, the trend, the seasonal components,
the flexible predictors and the seasonal predictors are all presented in the same
form (as predictors) and must be described in this list.<br>
Every predictor is a list of the following structures:<br></p><ul><li><p><strong>data</strong> – vector of length <em><strong>L</strong></em> (length of input data,
see above). For trend or for a seasonal component it is a vector of ones.
For a flexible or a seasonal predictor it is a vector of the predictor's data.</p></li>
<li><p><strong>times</strong> – vector of length <em><strong>L</strong></em> of times of observations.</p></li>
<li><p><strong>seasons</strong> – vector of length <em><strong>L</strong></em>. It is a vector of ones
for a trend or a flexible predictor. It is vector assigning seasons to every
observation (for a seasonal component or a seasonal predictor).
Seasons can be fractional for observations in between seasons.</p></li>
<li><p><strong>timeKnots</strong> – vector of times (time knots) where knots are positioned
(for a seasonal component or a seasonal predictor a few knots have the same time;
every knot is represented by time and season). Usually this vector coincides with
<strong>times</strong> vector described above, or <strong>timeKnots</strong> is a subset of
<strong>times</strong> vector.</p></li>
<li><p><strong>seasonalStructure</strong> – describes seasonal topology (which can have complex
structure) and seasonal knots.The seasonal topology is described by a list of
segments and seasonal knots, which are positioned inside the segments, on borders of
the segments or, when they are on on borders, they can connect two or more segments.<br><strong>seasonalStructure</strong> is a list of two elements:<br></p><ul><li><p><strong>segments</strong> – a list of vectors representing segments.
Each vector must contain two ordered real values which represent left and right borders
of a segment. Segments should not intersect (inside same predictor).</p></li>
<li><p><strong>sKnots</strong> – a list of real values (vectors of length one) or vectors of
lengths two or greater (seasonal knots) defining seasons of the knots (every knot
is represented by time and season). All real values must belong (be inside or on
border of) segments listed in <strong>segments</strong>. If a few values represent a single
seasonal knot then all these values must be on borders of some segments (or a single
segment). In this case they represent a seasonal knot which connects a few segments
(or both sides of one segment).</p></li>
</ul></li>
<li><p><strong>lambdas</strong> – a vector with three values representing lambda (smoothing)
parameters (time-time, season-season, time-season flexibility parameters) for this
predictor.</p></li>
</ul></dd>


<dt id="arg-confidence">confidence<a class="anchor" aria-label="anchor" href="#arg-confidence"></a></dt>
<dd><p>A vector of percentiles giving the coverage of confidence intervals.
It must be greater than 0 and less than 1.
If <code>NULL</code>, no confidence intervals are produced.</p></dd>


<dt id="arg-lambdas">lambdas<a class="anchor" aria-label="anchor" href="#arg-lambdas"></a></dt>
<dd><p>An optional parameter.
A structure which replaces lambda parameters provided with predictors.
It is used as either a starting point for the optimisation of parameters or as the
exact model parameters.</p></dd>


<dt id="arg-pattern">pattern<a class="anchor" aria-label="anchor" href="#arg-pattern"></a></dt>
<dd><p>An optional parameter which has the same structure as <code>lambdas</code>
although with a different meaning. All zero values correspond to lambda
(smoothing) parameters which will not be estimated.</p></dd>


<dt id="arg-nfold">nFold<a class="anchor" aria-label="anchor" href="#arg-nfold"></a></dt>
<dd><p>An optional parameter setting the number of folds for cross validation.</p></dd>


<dt id="arg-reltol">reltol<a class="anchor" aria-label="anchor" href="#arg-reltol"></a></dt>
<dd><p>An optional parameter which is passed directly to <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim</a>()</code>
when optimising the parameters of the model.</p></dd>


<dt id="arg-gapcv">gapCV<a class="anchor" aria-label="anchor" href="#arg-gapcv"></a></dt>
<dd><p>An optional parameter defining the length of the sequence of
skipped values in the cross validation procedure.</p></dd>


<dt id="arg-solver">solver<a class="anchor" aria-label="anchor" href="#arg-solver"></a></dt>
<dd><p>A vector with two string values. The only supported combinations are:
c("Matrix", "cholesky") (default), and c("Matrix", "qr").
The parameter is used to specify a particular library
and method to solve the minimisation problem during STR decompositon.</p></dd>


<dt id="arg-trace">trace<a class="anchor" aria-label="anchor" href="#arg-trace"></a></dt>
<dd><p>When <code>TRUE</code>, tracing is turned on.</p></dd>


<dt id="arg-ratiogap">ratioGap<a class="anchor" aria-label="anchor" href="#arg-ratiogap"></a></dt>
<dd><p>Ratio to define hyperparameter bounds for one-dimensional search.</p></dd>


<dt id="arg-relcv">relCV<a class="anchor" aria-label="anchor" href="#arg-relcv"></a></dt>
<dd><p>Minimum improvement required after all predictors tried. It is used to exit heuristic serach of lambda parameters.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A structure containing input and output data.
It is an <strong>S3</strong> class <code>STR</code>, which is a list with the following components:</p><ul><li><p><strong>output</strong> – contains decomposed data. It is a list of three components:</p><ul><li><p><strong>predictors</strong> – a list of components where each component
corresponds to the input predictor. Every such component is a list containing the following:</p><ul><li><p><strong>data</strong> – fit/forecast for the corresponding predictor (trend, seasonal component, flexible or seasonal predictor).</p></li>
<li><p><strong>beta</strong> – beta coefficients of the fit of the coresponding predictor.</p></li>
<li><p><strong>lower</strong> – optional (if requested) matrix of lower bounds of confidence intervals.</p></li>
<li><p><strong>upper</strong> – optional (if requested) matrix of upper bounds of confidence intervals.</p></li>
</ul></li>
<li><p><strong>random</strong> – a list with one component <strong>data</strong>, which contains residuals of the model fit.</p></li>
<li><p><strong>forecast</strong> – a list with two components:</p><ul><li><p><strong>data</strong> – fit/forecast for the model.</p></li>
<li><p><strong>beta</strong> – beta coefficients of the fit.</p></li>
<li><p><strong>lower</strong> – optional (if requested) matrix of lower bounds of confidence intervals.</p></li>
<li><p><strong>upper</strong> – optional (if requested) matrix of upper bounds of confidence intervals.</p></li>
</ul></li>
</ul></li>
<li><p><strong>input</strong> – input parameters and lambdas used for final calculations.</p><ul><li><p><strong>data</strong> – input data.</p></li>
<li><p><strong>predictors</strong> - input predictors.</p></li>
<li><p><strong>lambdas</strong> – smoothing parameters used for final calculations (same as input lambdas for STR method).</p></li>
</ul></li>
<li><p><strong>cvMSE</strong> – optional cross validated (leave one out) Mean Squared Error.</p></li>
<li><p><strong>optim.CV.MSE</strong> or <strong>optim.CV.MAE</strong> – best cross validated Mean Squared Error or Mean Absolute Error (n-fold) achieved during minimisation procedure.</p></li>
<li><p><strong>nFold</strong> – the input <code>nFold</code> parameter.</p></li>
<li><p><strong>gapCV</strong> – the input <code>gapCV</code> parameter.</p></li>
<li><p><strong>method</strong> – contains strings <code>"STR"</code> or <code>"RSTR"</code> depending on used method.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Dokumentov, A., and Hyndman, R.J. (2022)
STR: Seasonal-Trend decomposition using Regression,
<em>INFORMS Journal on Data Science</em>, 1(1), 50-62.
<a href="https://robjhyndman.com/publications/str/" class="external-link">https://robjhyndman.com/publications/str/</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="STR.html">STR</a></code> <code><a href="STRmodel.html">STRmodel</a></code> <code><a href="AutoSTR.html">AutoSTR</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Alexander Dokumentov</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">TrendSeasonalStructure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  segments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sKnots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">WDSeasonalStructure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  segments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">48</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">148</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sKnots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">47</span>, <span class="fl">101</span><span class="op">:</span><span class="fl">147</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">48</span>, <span class="fl">100</span>, <span class="fl">148</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TrendSeasons</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">electricity</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">WDSeasons</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">electricity</span><span class="op">[</span>, <span class="st">"WorkingDaySeasonality"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">electricity</span><span class="op">[</span>, <span class="st">"Consumption"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Times</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">electricity</span><span class="op">[</span>, <span class="st">"Time"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">TempM</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">electricity</span><span class="op">[</span>, <span class="st">"Temperature"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">TempM2</span> <span class="op">&lt;-</span> <span class="va">TempM</span><span class="op">^</span><span class="fl">2</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TrendTimeKnots</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Times</span>, <span class="fl">1</span><span class="op">)</span>, to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">Times</span>, <span class="fl">1</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">116</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">SeasonTimeKnots</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Times</span>, <span class="fl">1</span><span class="op">)</span>, to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">Times</span>, <span class="fl">1</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">24</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TrendData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Times</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">SeasonData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Times</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Trend</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">"Trend"</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">TrendData</span>,</span></span>
<span class="r-in"><span>  times <span class="op">=</span> <span class="va">Times</span>,</span></span>
<span class="r-in"><span>  seasons <span class="op">=</span> <span class="va">TrendSeasons</span>,</span></span>
<span class="r-in"><span>  timeKnots <span class="op">=</span> <span class="va">TrendTimeKnots</span>,</span></span>
<span class="r-in"><span>  seasonalStructure <span class="op">=</span> <span class="va">TrendSeasonalStructure</span>,</span></span>
<span class="r-in"><span>  lambdas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1500</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">WDSeason</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">"Dayly seas"</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">SeasonData</span>,</span></span>
<span class="r-in"><span>  times <span class="op">=</span> <span class="va">Times</span>,</span></span>
<span class="r-in"><span>  seasons <span class="op">=</span> <span class="va">WDSeasons</span>,</span></span>
<span class="r-in"><span>  timeKnots <span class="op">=</span> <span class="va">SeasonTimeKnots</span>,</span></span>
<span class="r-in"><span>  seasonalStructure <span class="op">=</span> <span class="va">WDSeasonalStructure</span>,</span></span>
<span class="r-in"><span>  lambdas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.003</span>, <span class="fl">0</span>, <span class="fl">240</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">StaticTempM</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">"Temp Mel"</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">TempM</span>,</span></span>
<span class="r-in"><span>  times <span class="op">=</span> <span class="va">Times</span>,</span></span>
<span class="r-in"><span>  seasons <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  timeKnots <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  seasonalStructure <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  lambdas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">StaticTempM2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">"Temp Mel^2"</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">TempM2</span>,</span></span>
<span class="r-in"><span>  times <span class="op">=</span> <span class="va">Times</span>,</span></span>
<span class="r-in"><span>  seasons <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  timeKnots <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  seasonalStructure <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  lambdas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Predictors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">Trend</span>, <span class="va">WDSeason</span>, <span class="va">StaticTempM</span>, <span class="va">StaticTempM2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">elec.fit</span> <span class="op">&lt;-</span> <span class="fu">heuristicSTR</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">Data</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">Predictors</span>,</span></span>
<span class="r-in"><span>  gapCV <span class="op">=</span> <span class="fl">48</span> <span class="op">*</span> <span class="fl">7</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">elec.fit</span>,</span></span>
<span class="r-in"><span>  xTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2000-01-11"</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="op">(</span><span class="va">Times</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span> <span class="op">/</span> <span class="fl">48</span> <span class="op">-</span> <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  forecastPanels <span class="op">=</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="heuristicSTR-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">########################################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TrendSeasonalStructure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  segments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sKnots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">DailySeasonalStructure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  segments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">48</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sKnots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">47</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">48</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">WeeklySeasonalStructure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  segments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">336</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sKnots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">332</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">336</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">WDSeasonalStructure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  segments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">48</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">148</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sKnots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">47</span>, <span class="fl">101</span><span class="op">:</span><span class="fl">147</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">48</span>, <span class="fl">100</span>, <span class="fl">148</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TrendSeasons</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">electricity</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">DailySeasons</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">electricity</span><span class="op">[</span>, <span class="st">"DailySeasonality"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">WeeklySeasons</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">electricity</span><span class="op">[</span>, <span class="st">"WeeklySeasonality"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">WDSeasons</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">electricity</span><span class="op">[</span>, <span class="st">"WorkingDaySeasonality"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">electricity</span><span class="op">[</span>, <span class="st">"Consumption"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Times</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">electricity</span><span class="op">[</span>, <span class="st">"Time"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">TempM</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">electricity</span><span class="op">[</span>, <span class="st">"Temperature"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">TempM2</span> <span class="op">&lt;-</span> <span class="va">TempM</span><span class="op">^</span><span class="fl">2</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TrendTimeKnots</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Times</span>, <span class="fl">1</span><span class="op">)</span>, to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">Times</span>, <span class="fl">1</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">116</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">SeasonTimeKnots</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Times</span>, <span class="fl">1</span><span class="op">)</span>, to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">Times</span>, <span class="fl">1</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">24</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">SeasonTimeKnots2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Times</span>, <span class="fl">1</span><span class="op">)</span>, to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">Times</span>, <span class="fl">1</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TrendData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Times</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">SeasonData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Times</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Trend</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">"Trend"</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">TrendData</span>,</span></span>
<span class="r-in"><span>  times <span class="op">=</span> <span class="va">Times</span>,</span></span>
<span class="r-in"><span>  seasons <span class="op">=</span> <span class="va">TrendSeasons</span>,</span></span>
<span class="r-in"><span>  timeKnots <span class="op">=</span> <span class="va">TrendTimeKnots</span>,</span></span>
<span class="r-in"><span>  seasonalStructure <span class="op">=</span> <span class="va">TrendSeasonalStructure</span>,</span></span>
<span class="r-in"><span>  lambdas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1500</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">WSeason</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">"Weekly seas"</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">SeasonData</span>,</span></span>
<span class="r-in"><span>  times <span class="op">=</span> <span class="va">Times</span>,</span></span>
<span class="r-in"><span>  seasons <span class="op">=</span> <span class="va">WeeklySeasons</span>,</span></span>
<span class="r-in"><span>  timeKnots <span class="op">=</span> <span class="va">SeasonTimeKnots2</span>,</span></span>
<span class="r-in"><span>  seasonalStructure <span class="op">=</span> <span class="va">WeeklySeasonalStructure</span>,</span></span>
<span class="r-in"><span>  lambdas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">0.6</span>, <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">WDSeason</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">"Dayly seas"</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">SeasonData</span>,</span></span>
<span class="r-in"><span>  times <span class="op">=</span> <span class="va">Times</span>,</span></span>
<span class="r-in"><span>  seasons <span class="op">=</span> <span class="va">WDSeasons</span>,</span></span>
<span class="r-in"><span>  timeKnots <span class="op">=</span> <span class="va">SeasonTimeKnots</span>,</span></span>
<span class="r-in"><span>  seasonalStructure <span class="op">=</span> <span class="va">WDSeasonalStructure</span>,</span></span>
<span class="r-in"><span>  lambdas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.003</span>, <span class="fl">0</span>, <span class="fl">240</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">TrendTempM</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">"Trend temp Mel"</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">TempM</span>,</span></span>
<span class="r-in"><span>  times <span class="op">=</span> <span class="va">Times</span>,</span></span>
<span class="r-in"><span>  seasons <span class="op">=</span> <span class="va">TrendSeasons</span>,</span></span>
<span class="r-in"><span>  timeKnots <span class="op">=</span> <span class="va">TrendTimeKnots</span>,</span></span>
<span class="r-in"><span>  seasonalStructure <span class="op">=</span> <span class="va">TrendSeasonalStructure</span>,</span></span>
<span class="r-in"><span>  lambdas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1e7</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">TrendTempM2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">"Trend temp Mel^2"</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">TempM2</span>,</span></span>
<span class="r-in"><span>  times <span class="op">=</span> <span class="va">Times</span>,</span></span>
<span class="r-in"><span>  seasons <span class="op">=</span> <span class="va">TrendSeasons</span>,</span></span>
<span class="r-in"><span>  timeKnots <span class="op">=</span> <span class="va">TrendTimeKnots</span>,</span></span>
<span class="r-in"><span>  seasonalStructure <span class="op">=</span> <span class="va">TrendSeasonalStructure</span>,</span></span>
<span class="r-in"><span>  lambdas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="co"># Starting parameter is too far from the optimal value</span></span></span>
<span class="r-in"><span><span class="va">Predictors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">Trend</span>, <span class="va">WSeason</span>, <span class="va">WDSeason</span>, <span class="va">TrendTempM</span>, <span class="va">TrendTempM2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">elec.fit</span> <span class="op">&lt;-</span> <span class="fu">heuristicSTR</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">Data</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">Predictors</span>,</span></span>
<span class="r-in"><span>  gapCV <span class="op">=</span> <span class="fl">48</span> <span class="op">*</span> <span class="fl">7</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">elec.fit</span>,</span></span>
<span class="r-in"><span>  xTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2000-01-11"</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="op">(</span><span class="va">Times</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span> <span class="op">/</span> <span class="fl">48</span> <span class="op">-</span> <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  forecastPanels <span class="op">=</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="heuristicSTR-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="plotBeta.html">plotBeta</a></span><span class="op">(</span><span class="va">elec.fit</span>, predictorN <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="heuristicSTR-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="plotBeta.html">plotBeta</a></span><span class="op">(</span><span class="va">elec.fit</span>, predictorN <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="heuristicSTR-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alexander Dokumentov, Rob Hyndman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

